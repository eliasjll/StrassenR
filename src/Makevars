# This file configures the C++ compiler for R.
# It uses conditional logic to apply the correct settings for macOS and Linux.

# Check the operating system
ifeq ($(shell uname -s), Darwin)
  # --- macOS specific settings using Homebrew ---
  LLVM_DIR = $(shell brew --prefix llvm)
  CC = $(LLVM_DIR)/bin/clang
  CXX = $(LLVM_DIR)/bin/clang++
  PKG_CXXFLAGS = -I$(LLVM_DIR)/include -fopenmp
  PKG_LIBS = -L$(LLVM_DIR)/lib -lomp
else
  # --- Generic Linux/other OS settings ---
  # On Linux, the system g++ compiler and standard OpenMP flags work as long
  # as the necessary libraries (like libgomp-dev or libomp-dev) are installed by the system
  # package manager (like apt-get in our GitHub Action).
  PKG_CXXFLAGS = -fopenmp
  PKG_LIBS = -fopenmp
endif
